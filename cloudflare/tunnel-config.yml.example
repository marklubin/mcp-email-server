# Cloudflare Tunnel Configuration for Workers VPC
#
# This tunnel is accessed ONLY via Workers VPC - no public DNS exposure.
# Copy this to ~/.cloudflared/config.yml on the server and fill in your tunnel ID.

tunnel: <TUNNEL_ID>
credentials-file: /home/mark/.cloudflared/<TUNNEL_ID>.json

# No hostname field = no public DNS routing
# Only Workers VPC can reach this tunnel
ingress:
  - service: http://127.0.0.1:8080

# Setup instructions:
#
# 1. Install cloudflared (if not already):
#    curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb -o cloudflared.deb
#    sudo dpkg -i cloudflared.deb
#
# 2. Login to Cloudflare (opens browser):
#    cloudflared tunnel login
#
# 3. Create tunnel:
#    cloudflared tunnel create mcp-router
#    # Note the tunnel ID from output!
#
# 4. Create config file:
#    cp tunnel-config.yml.example ~/.cloudflared/config.yml
#    # Edit config.yml and replace <TUNNEL_ID> with actual ID
#
# 5. Install systemd service:
#    sudo cp services/cloudflared.service /etc/systemd/system/
#    sudo systemctl daemon-reload
#    sudo systemctl enable --now cloudflared
#
# 6. Create Workers VPC Service (Cloudflare Dashboard):
#    - Go to Workers & Pages â†’ Workers VPC
#    - Create Service: mcp-router-vpc
#    - Select tunnel: mcp-router
#    - Target: http://127.0.0.1:8080
#
# Or via wrangler CLI:
#    npx wrangler vpc create mcp-router-vpc --tunnel-id <TUNNEL_ID> --target http://127.0.0.1:8080
#
# 7. Deploy the worker:
#    cd cloudflare/worker && npx wrangler deploy
